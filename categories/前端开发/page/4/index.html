<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Category: 前端开发 | 三水清</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="三水清">
<meta property="og:url" content="http://js8.in/categories/前端开发/page/4/index.html">
<meta property="og:site_name" content="三水清">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="三水清">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="三水清" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tp4.sinaimg.cn/2037334587/180/5626160002/1" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">三水清</a></h1>
		</hgroup>

		
		<p class="header-subtitle">程序媛鼓励师</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
							<li><a href="/slide">分享PPT</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="//github.com/ksky521" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="//weibo.com/sanshuiqing" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="mailto:ksky521@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CocoaPods/" style="font-size: 10px;">CocoaPods</a> <a href="/tags/DOM/" style="font-size: 11.11px;">DOM</a> <a href="/tags/IE/" style="font-size: 10px;">IE</a> <a href="/tags/IE6/" style="font-size: 11.11px;">IE6</a> <a href="/tags/PPT/" style="font-size: 13.33px;">PPT</a> <a href="/tags/Rem/" style="font-size: 10px;">Rem</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/ajax/" style="font-size: 14.44px;">ajax</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/audio/" style="font-size: 11.11px;">audio</a> <a href="/tags/a标签/" style="font-size: 10px;">a标签</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/chrome/" style="font-size: 12.22px;">chrome</a> <a href="/tags/css/" style="font-size: 16.67px;">css</a> <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/eAccelerator/" style="font-size: 10px;">eAccelerator</a> <a href="/tags/ecmascript/" style="font-size: 12.22px;">ecmascript</a> <a href="/tags/escape/" style="font-size: 10px;">escape</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/express/" style="font-size: 10px;">express</a> <a href="/tags/fis/" style="font-size: 10px;">fis</a> <a href="/tags/fisp/" style="font-size: 10px;">fisp</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/handleEvent/" style="font-size: 10px;">handleEvent</a> <a href="/tags/html5/" style="font-size: 12.22px;">html5</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jssdk/" style="font-size: 10px;">jssdk</a> <a href="/tags/kindle/" style="font-size: 11.11px;">kindle</a> <a href="/tags/linux/" style="font-size: 14.44px;">linux</a> <a href="/tags/livereload/" style="font-size: 10px;">livereload</a> <a href="/tags/livestyle/" style="font-size: 10px;">livestyle</a> <a href="/tags/memcached/" style="font-size: 10px;">memcached</a> <a href="/tags/mixjs/" style="font-size: 10px;">mixjs</a> <a href="/tags/mysql/" style="font-size: 11.11px;">mysql</a> <a href="/tags/name/" style="font-size: 10px;">name</a> <a href="/tags/nginx/" style="font-size: 11.11px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 15.56px;">nodejs</a> <a href="/tags/php/" style="font-size: 17.78px;">php</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/storage/" style="font-size: 10px;">storage</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/ueditor/" style="font-size: 10px;">ueditor</a> <a href="/tags/uglifyjs/" style="font-size: 10px;">uglifyjs</a> <a href="/tags/vps/" style="font-size: 10px;">vps</a> <a href="/tags/webapp/" style="font-size: 13.33px;">webapp</a> <a href="/tags/webbench/" style="font-size: 10px;">webbench</a> <a href="/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/tags/web前端开发/" style="font-size: 14.44px;">web前端开发</a> <a href="/tags/windows7技巧/" style="font-size: 10px;">windows7技巧</a> <a href="/tags/wordpress/" style="font-size: 12.22px;">wordpress</a> <a href="/tags/xss/" style="font-size: 12.22px;">xss</a> <a href="/tags/严格模式/" style="font-size: 10px;">严格模式</a> <a href="/tags/位运算/" style="font-size: 10px;">位运算</a> <a href="/tags/作用域/" style="font-size: 12.22px;">作用域</a> <a href="/tags/前端优化/" style="font-size: 10px;">前端优化</a> <a href="/tags/前端工具/" style="font-size: 14.44px;">前端工具</a> <a href="/tags/加速器/" style="font-size: 10px;">加速器</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/压力测试/" style="font-size: 10px;">压力测试</a> <a href="/tags/右键/" style="font-size: 10px;">右键</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/工作/" style="font-size: 10px;">工作</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/性能/" style="font-size: 12.22px;">性能</a> <a href="/tags/性能优化/" style="font-size: 11.11px;">性能优化</a> <a href="/tags/手机开发/" style="font-size: 11.11px;">手机开发</a> <a href="/tags/执行环境/" style="font-size: 10px;">执行环境</a> <a href="/tags/技巧/" style="font-size: 10px;">技巧</a> <a href="/tags/播放器/" style="font-size: 10px;">播放器</a> <a href="/tags/效率/" style="font-size: 10px;">效率</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/标签/" style="font-size: 10px;">标签</a> <a href="/tags/模块化/" style="font-size: 11.11px;">模块化</a> <a href="/tags/渲染模式/" style="font-size: 12.22px;">渲染模式</a> <a href="/tags/移动前端/" style="font-size: 12.22px;">移动前端</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/网络技术/" style="font-size: 18.89px;">网络技术</a> <a href="/tags/虚拟主机/" style="font-size: 10px;">虚拟主机</a> <a href="/tags/解耦/" style="font-size: 10px;">解耦</a> <a href="/tags/语法限制/" style="font-size: 10px;">语法限制</a> <a href="/tags/资源管理/" style="font-size: 12.22px;">资源管理</a> <a href="/tags/越狱/" style="font-size: 11.11px;">越狱</a> <a href="/tags/跨域/" style="font-size: 13.33px;">跨域</a> <a href="/tags/路径/" style="font-size: 10px;">路径</a> <a href="/tags/软件心得/" style="font-size: 12.22px;">软件心得</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.welefen.com/">welefen</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://vifix.cn/">vifix</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.woiweb.net/">我爱互联网</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.meituo.net/">美拓blog</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.zipeng.info/">kun的记事本</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.veryued.org/">非常长</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">三水清，前端从业者，先后就职于微博、腾讯、百度</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">三水清</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://tp4.sinaimg.cn/2037334587/180/5626160002/1" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">三水清</h1>
			</hgroup>
			
			<p class="header-subtitle">程序媛鼓励师</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
					<li><a href="/slide">分享PPT</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="//github.com/ksky521" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="//weibo.com/sanshuiqing" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="mailto:ksky521@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-ie6中a标签触发图片和ajax请求被abort" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2012/02/03/ie6中a标签触发图片和ajax请求被abort/" class="article-date">
  	<time datetime="2012-02-03T15:28:10.000Z" itemprop="datePublished">2012年2月3日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/02/03/ie6中a标签触发图片和ajax请求被abort/">IE6中a标签触发图片和ajax请求被abort</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="IE6_a标签的请求被abort的原因">IE6 a标签的请求被abort的原因</h2><p>最近项目中掉进IE6 a标签abort两次坑，第一次是a标签绑定一个事件，<code>href=&#39;javascript:;&#39;</code>这样a标签触发了事件，切换验证码图片，结果验证码图片总是显示不出来，通过抓包显示状态为<strong>abort</strong>。</p>
<p>其实这个的原因可以从IE6中a标签执行顺序说起，IE6中a标签执行onclick在执行默认事件（即href跳转）之前，当触发了绑定的事件之后，那么处理完事件之后，如果不<code>return false</code>或者阻止默认事件，则会继续执行href跳转，IE6会认为页面跳转到其他页面或者页面重新刷新，则abort之前<strong>onclick</strong>事件中的请求。<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IE6/">IE6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/a标签/">a标签</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2012/02/03/ie6中a标签触发图片和ajax请求被abort/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-javascript-contains方法来判断元素包含关系" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2012/01/04/javascript-contains方法来判断元素包含关系/" class="article-date">
  	<time datetime="2012-01-04T09:49:20.000Z" itemprop="datePublished">2012年1月4日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/01/04/javascript-contains方法来判断元素包含关系/">javascript contains方法来判断元素包含关系</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>IE中的<strong>contains</strong>方法可以判断A元素是否包含B元素，如果包含则返回true，否则返回false，在开发中会在事件代理处理上面用到。W3C的方法是<strong>compareDocumentPosition</strong>，所以综上来说：JS通过contains和compareDocumentPosition方法来确定DOM节点间的关系,判断一个元素(对象)是否为另一个元素的子元素。<br>IE的contains方法很简单，但是W3C的<code>DOMElement.contains(DOMNode)</code>方法会返回却是一个数值。</p>
<h2 id="DOMElement-contains(DOMNode)">DOMElement.contains(DOMNode)</h2><p>link：<a href="https://developer.mozilla.org/En/DOM/Node.compareDocumentPosition">https://developer.mozilla.org/En/DOM/Node.compareDocumentPosition</a>。</p>
<p><code>DOMElement.contains(DOMNode)</code></p>
<p>返回的不是一个布尔值，而是一个很奇怪的数值，它是通过如下方式累加计算出来的：</p>
<table>
<thead>
<tr>
<th>Bits</th>
<th>Number</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>000000</td>
<td>0</td>
<td>元素一致</td>
</tr>
<tr>
<td>000001</td>
<td>1</td>
<td>节点在不同的文档（或者一个在文档之外）</td>
</tr>
<tr>
<td>000010</td>
<td>2</td>
<td>节点 B 在节点 A 之前</td>
</tr>
<tr>
<td>000100</td>
<td>4</td>
<td>节点 A 在节点 B 之前</td>
</tr>
<tr>
<td>001000</td>
<td>8</td>
<td>节点 B 包含节点 A</td>
</tr>
<tr>
<td>010000</td>
<td>16</td>
<td>节点 A 包含节点 B</td>
</tr>
<tr>
<td>100000</td>
<td>32</td>
<td>浏览器的私有使用</td>
</tr>
</tbody>
</table>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2012/01/04/javascript-contains方法来判断元素包含关系/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-非字母javascript" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/11/29/非字母javascript/" class="article-date">
  	<time datetime="2011-11-29T10:17:03.000Z" itemprop="datePublished">2011年11月29日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/11/29/非字母javascript/">非字母javascript</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你尝试过写javascript不用字母和数字吗？最近准备个xss的分享，记起了之前看到过老外一篇文章，内容是关于non-alpha javascript的，拿到代码分析下。<br>先看这段猥琐的javascript代码：</p>
<pre><code class="javascript">_=+[];$=_++;__=(_&lt;&lt;_);___=(_&lt;&lt;_)+_;____=__+__;_____=__+___;$$=({}+&quot;&quot;)[_____]+({}+&quot;&quot;)[_]+({}[$]+&quot;&quot;)[_]+(($!=$)+&quot;&quot;)[___]+(($==$)+&quot;&quot;)[$]+(($==$)+&quot;&quot;)[_]+(($==$)+&quot;&quot;)[__]+({}+&quot;&quot;)[_____]+(($==$)+&quot;&quot;)[$]+({}+&quot;&quot;)[_]+(($==$)+&quot;&quot;)[_];$$$=(($!=$)+&quot;&quot;)[_]+(($!=$)+&quot;&quot;)[__]+(($==$)+&quot;&quot;)[___]+(($==$)+&quot;&quot;)[_]+(($==$)+&quot;&quot;)[$];$_$=({}+&quot;&quot;)[_____]+({}+&quot;&quot;)[_]+({}+&quot;&quot;)[_]+(($!=$)+&quot;&quot;)[__]+({}+&quot;&quot;)[__+_____]+({}+&quot;&quot;)[_____]+ ({}+&quot;&quot;)[_]+({}[$]+&quot;&quot;)[__]+(($==$)+&quot;&quot;)[___]; ($)[$$][$$]($$$+&quot;(&#39;&quot;+$_$+&quot;&#39;)&quot;)();
</code></pre>
<p>看到这里你肯定抓狂了，但是这段代码是可以运行的，运行的结果是 <code>alert(&#39;cool code&#39;);</code> 。</p>
<h2 id="javascript分析">javascript分析</h2><p>这段代码能够运行，原因是javascript是弱类型的脚本语言，而且语法相对松散。例如下面的javascript是正确的，而且是有出乎意料结果的：<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/11/29/非字母javascript/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-javascript-位运算符" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/11/28/javascript-位运算符/" class="article-date">
  	<time datetime="2011-11-28T10:46:09.000Z" itemprop="datePublished">2011年11月28日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/11/28/javascript-位运算符/">javascript 位运算符</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前几天看到国外人在github总结的<strong>javascript</strong>的奇巧淫技（<a href="http://t.cn/herRcq），里面对位运算提到的很多，所以来科普一下javascript的位运算。于是找到了w3cschool的这篇教程，很好很强大啊，于是就忍不住转载了……">http://t.cn/herRcq），里面对位运算提到的很多，所以来科普一下javascript的位运算。于是找到了w3cschool的这篇教程，很好很强大啊，于是就忍不住转载了……</a></p>
<p><strong>ECMAScript</strong> 整数有两种类型，即有符号整数（允许用正数和负数）和无符号整数（只允许用正数）。在 ECMAScript 中，所有整数字面量默认都是有符号整数，这意味着什么呢？</p>
<p>有符号整数使用 31 位表示整数的数值，用第 32 位表示整数的符号，0 表示正数，1 表示负数。数值范围从 -2147483648 到 2147483647。</p>
<p>可以以两种不同的方式存储二进制形式的有符号整数，一种用于存储正数，一种用于存储负数。正数是以真二进制形式存储的，前 31 位中的每一位都表示 2 的幂，从第 1 位（位 0）开始，表示 2<sup>0</sup>，第 2 位（位 1）表示 2<sup>1</sup>。没用到的位用 0 填充，即忽略不计。例如，下图展示的是数 18 的表示法。</p>
<p><img src="http://www.w3school.com.cn/i/ct_js_integer_binary_signed_32bits.gif" alt="32 位二进制表示的有符号整数"></p>
<p>18 的二进制版本只用了前 5 位，它们是这个数字的有效位。把数字转换成二进制字符串，就能看到有效位：</p>
<pre><code class="javascript">var iNum = 18;
alert(iNum.toString(2));    //输出 &quot;10010&quot;
</code></pre>
<p>这段代码只输出 “10010”，而不是 18 的 32 位表示。其他的数位并不重要，因为仅使用前 5 位即可确定这个十进制数值。如下图所示：</p>
<p><img src="http://www.w3school.com.cn/i/ct_js_integer_binary_number18.gif" alt="5 位二进制表示的整数 18"></p>
<p>负数也存储为二进制代码，不过采用的形式是二进制补码。计算数字二进制补码的步骤有三步：</p>
<ol>
<li>确定该数字的非负版本的二进制表示（例如，要计算 -18的二进制补码，首先要确定 18 的二进制表示）</li>
<li>求得二进制反码，即要把 0 替换为 1，把 1 替换为 0</li>
<li>在二进制反码上加 1</li>
</ol>
<p>要确定 -18 的二进制表示，首先必须得到 18 的二进制表示，如下所示：</p>
<pre><code class="javascript">0000 0000 0000 0000 0000 0000 0001 0010
</code></pre>
<p>接下来，计算二进制反码，如下所示：</p>
<pre><code class="javascript">1111 1111 1111 1111 1111 1111 1110 1101
</code></pre>
<p>最后，在二进制反码上加 1，如下所示：</p>
<pre><code class="javascript">1111 1111 1111 1111 1111 1111 1110 1101
                                      1
---------------------------------------
1111 1111 1111 1111 1111 1111 1110 1110
</code></pre>
<p>因此，-18 的二进制表示即 1111 1111 1111 1111 1111 1111 1110 1110。记住，在处理有符号整数时，开发者不能访问 31 位。</p>
<p>有趣的是，把负整数转换成二进制字符串后，ECMAScript 并不以二进制补码的形式显示，而是用数字绝对值的标准二进制代码前面加负号的形式输出。例如：</p>
<pre><code class="javascript">var iNum = -18;
alert(iNum.toString(2));    //输出 &quot;-10010&quot;
</code></pre>
<p>这段代码输出的是 “-10010”，而非二进制补码，这是为避免访问位 31。为了简便，ECMAScript 用一种简单的方式处理整数，使得开发者不必关心它们的用法。</p>
<p>另一方面，无符号整数把最后一位作为另一个数位处理。在这种模式中，第 32 位不表示数字的符号，而是值 2<sup>31</sup>。由于这个额外的位，无符号整数的数值范围为 0 到 4294967295。对于小于 2147483647 的整数来说，无符号整数看来与有符号整数一样，而大于 2147483647 的整数则要使用位 31（在有符号整数中，这一位总是 0）。</p>
<p>把无符号整数转换成字符串后，只返回它们的有效位。</p>
<p><strong>注意：</strong>所有整数字面量都默认存储为有符号整数。只有 ECMAScript 的位运算符才能创建无符号整数。</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/位运算/">位运算</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/11/28/javascript-位运算符/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-ie6中javascript文件开启gzip出现代码不执行情况" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/11/15/ie6中javascript文件开启gzip出现代码不执行情况/" class="article-date">
  	<time datetime="2011-11-14T20:25:23.000Z" itemprop="datePublished">2011年11月15日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/11/15/ie6中javascript文件开启gzip出现代码不执行情况/">IE6中javascript文件开启Gzip出现代码不执行情况</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天处理IE6下的一个bug，经过调试才发现是<strong>javascript</strong>文件文件总是执行不了，</p>
<p>后来中午吃完饭回来才想起以前同事遇见的html中的javascript不可以执行的问题，怀疑是gzip的原因，此次的问题就是因为动态加载javascript文件导致代码不执行，</p>
<p>经过研究发现gzip压缩过的javascript文件，如果header里Cache-Control 数据有no-cache, no-store，就会出现IE6中js代码不执行的问题。下面是转发的文章内容：</p>
<p>IE6下面调用开启了gzip压缩Javascript的时候，时常会碰到无法执行的情况，有可能是src调用，有可能是ajax调用，其它的浏览器工作正常，唯独IE6不能正常工作。<br>出现这个BUG的状况如下：</p>
<ol>
<li>用户使用IE6浏览器</li>
<li>服务器没有设置 被请求文件(javascript) expires, cache-control.</li>
<li>服务器端开启了chunked encoding模式</li>
<li>通过javascrip的src调用方式或者ajax请求javascript文件</li>
<li>有可能是通过php生成的javascript文件</li>
<li>服务器端开启了gzip压缩</li>
</ol>
<p>解决这个问题，我们要在服务器的cache-control和expires 头信息上做点工作。<br>经过测试，header头信息如下的gzip压缩过的javascript调用可以正常工作。</p>
<blockquote>
<p>Cache-Control:maxage=1<br>Connection:keep-alive<br>Content-Encoding:gzip<br>Content-Type:application/x-javascript;charset=GBK<br>Date:Wed, 01 Dec 2010 01:24:07 GMT<br>Expires:Wed, 01 Dec 2010 01:24:08 GMT<br>Pragma:public<br>Server:nginx<br>Transfer-Encoding:chunked</p>
</blockquote>
<p>分析上面的头信息，我们可以注意到：</p>
<ol>
<li>cache-control必须要设置成maxage=time的格式，maxage是指定缓存生效时间，1为1秒</li>
<li>Expires必须要设置，它的时间稍大于Date即可，Date是页面请求时间，Expires是过期时间</li>
<li>Pragma设置为public</li>
</ol>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IE6/">IE6</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/11/15/ie6中javascript文件开启gzip出现代码不执行情况/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-javascript的string-replace的妙用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/11/08/javascript的string-replace的妙用/" class="article-date">
  	<time datetime="2011-11-07T19:33:54.000Z" itemprop="datePublished">2011年11月8日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/11/08/javascript的string-replace的妙用/">javascript的String.replace的妙用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>作为<strong>前端开发</strong>人员，总会有点自己的奇技淫巧，毕竟前端开发不同于后端，代码全部暴漏给用户不说，代码冗余了少则影响带宽，多则效率降低。所以今天我也来爆个自己的奇技淫巧。</p>
<p>j<strong>avascript</strong>的String.replace方法应该javascript前端开发工程师都了解，可是你掌握了吗？</p>
<p>replace有接受两个参数，第一个参数可以是字符串，也可以是正则表达式，第二个参数除支持字符串之外，还支持<code>$1</code>形式正则匹配的文本，除此之外还支持传入一个处理函数，这个函数的<code>return</code>值就是要替换成的内容。<br>了解更多javascript的String.replace用法，访问：<a href="http://www.w3school.com.cn/js/jsref_replace.asp">http://www.w3school.com.cn/js/jsref_replace.asp</a></p>
<h3 id="String-replace的妙用">String.replace的妙用</h3><p>在《javascript获取隐藏dom的宽高》中，我就使用了replace，使用replace做一些重复性的操作，减少不必要的代码。</p>
<p>其实这里说的重复性的工作就是循环！例如，我们要获取假如我要求id为div1和div2的两个元素的宽高，一部分人会一点一点的做，先算完div1的，然后做div2的，这样你是否觉得有部分是充分的操作呢，于是可以将取宽高的函数独立出来，这样多了一个函数，而且函数只用这两次，似乎有点浪费。</p>
<p>于是一部分人想到了使用split切分字符串，然后用Array.forEach做循环。例如下面的代码：</p>
<pre><code class="javascript">&quot;div1 div2&quot;.split(&#39; &#39;).forEach(function(a,i){
    console.log(a);
    //do something
})
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技巧/">技巧</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/11/08/javascript的string-replace的妙用/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-正确理解javascript的this关键字" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/10/24/正确理解javascript的this关键字/" class="article-date">
  	<time datetime="2011-10-24T08:55:30.000Z" itemprop="datePublished">2011年10月24日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/10/24/正确理解javascript的this关键字/">正确理解javascript的this关键字</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>javascript有<code>this</code>关键字，this跟<strong>javascript</strong>的执行上下文密切相关，很多前端开发工程师至今对this关键字还是模棱两可，本文将结合代码讲解下javascript的<strong>this关键字</strong>。</p>
<h2 id="this和对象的关系">this和对象的关系</h2><p>首先来看下面的代码：</p>
<pre><code class="javascript">var person = {
    name:&#39;Theo Wong&#39;,
    gender:&#39;male&#39;,
    getName:function(){
        console.log(person.name);
    }
};
person.getName();
</code></pre>
<p>定义了一个person对象，对象中包含了name、gender属性，还包括了一个getName的方法，其作用是输出person对象的name。在这种情况下，我们可以使用this来在person对象中代替person对象本身，所以上面的代码跟下面的直接结果是一样的：</p>
<pre><code class="javascript">var person = {
    name:&#39;Theo Wong&#39;,
    gender:&#39;male&#39;,
    getName:function(){
        console.log(this.name);
    }
};
person.getName();
</code></pre>
<p>请记住一点：<strong>this永远指向的是函数对象的所有者</strong>！上面的例子中getName的所有者是person对象，所以this指代的是person。</p>
<h2 id="this和全局对象">this和全局对象</h2><p>我们再来看看再全局对象中，this指代的是什么，我们知道javascript是脚本语言，所以javascript的执行需要有一个宿主环境，在浏览器中这个宿主环境就是window对象，所以在全局函数中，this指代的是window对象（除非使用new，call，apply方法来改变this的指代关系）。懂得了这个关键点，下面的代码就好理解了：</p>
<pre><code class="javascript">var a = 1;
console.log(a);//1
console.log(this.a);//1
console.log(window.a);//1
</code></pre>
<p>很多<strong>前端开发</strong>工程师经常使用在函数名字之前添加个window来调用函数，这是因为在浏览器中全局对象就是window，所有的函数变量都是在window对象之中，所以下面的代码中的this指代window对象就好理解了：</p>
<pre><code class="javascript">var a = 1;
function foo(){
    var b = 2;
    console.log(this.a+b);//3
}
foo();
</code></pre>
<p>所以说，只要记住：<strong>this</strong>永远指向的是函数对象的所有者，即this的值是由激活执行上下文代码的调用者决定的，就好理解this的指代关系了。<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/this/">this</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/10/24/正确理解javascript的this关键字/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-chrome扩展应用开发教程之调试和打包上线" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/10/23/chrome扩展应用开发教程之调试和打包上线/" class="article-date">
  	<time datetime="2011-10-23T09:10:02.000Z" itemprop="datePublished">2011年10月23日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/10/23/chrome扩展应用开发教程之调试和打包上线/">chrome扩展应用开发教程之调试和打包上线</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天的文章来说说chrome扩展开发的最后一步，代码调试和打包上线。</p>
<h2 id="chrome应用代码调试">chrome应用代码调试</h2><p>跟<strong>前端开发</strong>一样，chrome应用开发过程中也是需要代码调试的，用的调试工具自然是chrome的开发者工具，所以前端开发工程师应该很快就可以上手！</p>
<p>代码调试需要调出来chrome的扩展程序页面，有三种方式调出来chrome的扩展程序页面</p>
<ol>
<li>chrome右上角“扳手图标”→工具→扩展程序</li>
<li>新开个chrome选项卡，然后在地址栏输入：chrome://extensions/回车</li>
<li>右键点击某个扩展，选择管理扩展程序<br>这样就会看到如下的扩展程序界面：<br><a href="/uploads/2011/10/2011-10-22_124540-300x179.png"><img src="/uploads/2011/10/2011-10-22_124540-300x179.png" alt="chrome扩展程序界面" title="chrome扩展程序界面"></a></li>
</ol>
<p>点击右上角的“开发者模式”，就会出现三个按钮，选择“载入正在开发中的扩展程序…”，在新开的窗口中找到自己开发的程序的路径，然后打开就可以导入开发中的chrome应用了。点击活动视窗，就可以打开chrome的开发中工具，前端开发工程师就可以进行调试了，跟调试前端页面一样哦。<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chrome/">chrome</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/10/23/chrome扩展应用开发教程之调试和打包上线/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-chrome扩展应用开发教程之天气预报应用开发" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/10/22/chrome扩展应用开发教程之天气预报应用开发/" class="article-date">
  	<time datetime="2011-10-22T12:14:24.000Z" itemprop="datePublished">2011年10月22日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/10/22/chrome扩展应用开发教程之天气预报应用开发/">chrome扩展应用开发教程之天气预报应用开发</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上一篇讲到了<strong>chrome应用开发</strong>的基础知识，这一篇通过周末天气预报插件的开发来讲解下chrome扩展应用的开发过程。熟悉前端开发的童靴，知道了chrome应用开发的基本配置，应该很快就可以开发一个chrome应用，因为chrome插件就是纯粹的javascript和html！</p>
<h2 id="开发前的准备">开发前的准备</h2><p>在开发之前需要统筹下，chrome天气预报插件的基本功能和界面，本插件，会这chrome顶部添加一个带有当前天气icon的应用，点击应用打开弹窗页面，天气的数据来自weather.com.cn的接口，所以我们需要跨域授权应用可以请求weather.com.cn的数据。于是chrome天气预报插件的manifest.json部分代码就出来了：</p>
<pre><code class="javascript">{
  &quot;name&quot;: &quot;Chrome Weather&quot;, //name
  &quot;version&quot;: &quot;0.1.0&quot;, //version
  &quot;description&quot;: &quot;weather.&quot;, //description
  &quot;background_page&quot;: &quot;background.html&quot;,//背景页面，应用请求数据，处理icon显示实时气温
  &quot;browser_action&quot;: {
    &quot;default_icon&quot;: &quot;icon.png&quot; ,//默认的icon
    &quot;default_title&quot;: &quot;Weather&quot;,//默认鼠标overtitle
    &quot;default_popup&quot;: &quot;popup.html&quot;//弹窗页面
  },
    &quot;permissions&quot;: [ &quot;tabs&quot;, &quot;http://*.weather.com.cn/&quot; ]//跨域请求授权
}
</code></pre>
<p>先来个最终效果截图：<br><a href="/uploads/2011/10/2011-10-22_124856-300x80.png"><img src="/uploads/2011/10/2011-10-22_124856-300x80.png" alt="chrome天气预报应用最终效果截图" title="chrome天气预报应用最终效果截图"></a></p>
<h2 id="通过背景页面来请求天气数据">通过背景页面来请求天气数据</h2><p>chrome天气插件用到了weather.com.cn的三个接口：</p>
<ol>
<li>根据ip获取当前用户所在城市天气编号：<a href="http://61.4.185.48:81/g/">http://61.4.185.48:81/g/</a></li>
<li>根据城市天气编号获取五天内天气：<a href="http://m.weather.com.cn/data/&#39;+id+&#39;.html">http://m.weather.com.cn/data/&#39;+id+&#39;.html</a></li>
<li>根据城市天气编号获取实时天气：<a href="http://www.weather.com.cn/data/sk/&#39;+id+&#39;.html">http://www.weather.com.cn/data/sk/&#39;+id+&#39;.html</a><br>chrome天气插件使用了jQuery开发，所以我们需要在html的头部添加jquery库：<br><pre lang="html"><br><script type="text/javascript" src="js/jquery.min.js"></script><br>```</li>
</ol>
<h3 id="根据ip获取当前用户所在城市">根据ip获取当前用户所在城市</h3><p>当用户第一次运行chrome时候，需要请求背景页面，即background.html，这时，我们需要请求接口来获取当前用户所在的城市信息，以根据cityid获取天气情况。代码如下：</p>
<pre><code class="javascript">$.getScript(&#39;http://61.4.185.48:81/g/&#39;,function(){
    window.localStorage.cityid = id;//保存cityid到localStorage
    getWeather(id);//获取天气信息
});
</code></pre>
<h3 id="根据cityid获取天气信息">根据cityid获取天气信息</h3><p>上一步，涉及到了一个函数getWeather，这个函数的作用就是做一个xmlHttpRequest请求，获取当前cityid的天气信息，包括实时天气。getWeather中运用了send函数来做xmlHttpRequest请求。</p>
<pre><code class="javascript">function getWeather(id){
    var url = &#39;http://m.weather.com.cn/data/&#39;+id+&#39;.html&#39;;
    var url2 = &#39;http://www.weather.com.cn/data/sk/&#39;+id+&#39;.html&#39;;
    send(url,function(json){
        json0 = json;
        window.localStorage.json0 = JSON.stringify(json);
        doit++;
        deal();//处理json0
    }).call(this,url2,function(json){
        json1 = json;
        window.localStorage.json1 = JSON.stringify(json);
        doit++;
        deal();//处理json1
    });

}
function send(url,cb){
    var xhr = new XMLHttpRequest();
    xhr.open(&quot;GET&quot;, url, true);
    xhr.onreadystatechange = function() {
      if (xhr.readyState == 4) {
        var json = JSON.parse(xhr.responseText);//解析json，保证安全性
        typeof cb===&#39;function&#39; &amp;&amp; json.weatherinfo &amp;&amp; cb(json.weatherinfo);
        xhr = null;
      }
    }
    xhr.send();
    return arguments.callee;
}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chrome/">chrome</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/10/22/chrome扩展应用开发教程之天气预报应用开发/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-chrome扩展应用开发教程之开发chrome应用基础" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/10/21/chrome扩展应用开发教程之开发chrome应用基础/" class="article-date">
  	<time datetime="2011-10-21T11:55:17.000Z" itemprop="datePublished">2011年10月21日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/10/21/chrome扩展应用开发教程之开发chrome应用基础/">chrome扩展应用开发教程之开发chrome应用基础</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>不得不说<strong>chrome</strong>做的真的不错，听了貘大大关于<strong>chrome插件</strong>机制的讲座，就有亲手做个chrome应用的冲动，这个周末终于抽时间做了一个简单的天气预报插件，原理还是很简单的，采用了weather.com.cn的数据，因为比较熟悉这个weather.com.cn的接口，所以很快就搞定一个简单的chrome天气预报应用了。废话不多说了，开始正文。</p>
<h2 id="chrome应用开发基础知识">chrome应用开发基础知识</h2><p>chrome扩展应用是由html、css和javascript组成的，所以chrome应用的门槛比较低，对于一个<strong>前端开发</strong>者，只要读懂了chrome的开发文档，就可以很快的上手一个chrome应用。</p>
<p>每个chrome扩展都应该包含下面的文件：</p>
<blockquote>
<p>一个包括一个manifest.json文件，是个配置文件，json格式，通过manifest.json可以设置应用的icon，指定默认的background.html或者popup.html……<br>一个或多个html文件（除非这个应用是一个皮肤）<br>可选的一个或多个javascript文件<br>可选的任何需要的其他文件，例如图片</p>
</blockquote>
<p>在开发应用（扩展）时，需要把这些文件都放到同一个目录下。发布应用（扩展）时，这个目录全部打包到一个应用（扩展）名是.crx的压缩文件中。如果使用<a href="https://chrome.google.com/webstore/developer/dashboard">Chrome Developer Dashboard</a>，上传应用（扩展），可以自动生成.crx文件。</p>
<p>下图是我天气预报插件的文件列表：<br><a href="/uploads/2011/10/2011-10-21_215004.png"><img src="/uploads/2011/10/2011-10-21_215004.png" alt="chrome天气预报插件目录结构" title="chrome天气预报插件目录结构"></a></p>
<h2 id="chrome应用界面控制">chrome应用界面控制</h2><p>chrome应用会以browser action或page action的形式在chrome浏览器界面上展现出来。每个应用扩展最多可以有一个browser action或page action。当应用（扩展）的图标是否显示出来是取决于单个的页面时，应当选择page action；当其它情况时可以选择browser action。</p>
<p>例如gmail提醒应用使用了browser action，它在工具栏上增加一个图标：</p>
<p><a href="/uploads/2011/10/gmail.png"><img src="/uploads/2011/10/gmail.png" alt="gmail应用使用browser action提示" title="gmail应用使用browser action提示"></a></p>
<p>这个新闻阅读应用也使用了browser action，当点击时会弹出一个气泡窗口popup.html：<br><a href="/uploads/2011/10/news.png"><img src="/uploads/2011/10/news.png" alt="news使用的是popup的方式" title="news使用的是popup的方式"></a></p>
<p>另外chrome还包括了<a href="http://dev.chromium.org/developers/design-documents/desktop-notifications/api-specification">桌面提醒</a>（gmail新邮件提醒），主题（chrome皮肤），应用设置页面（应用设置页面），选项卡页面（新选项卡页面）等多种界面形式，本文示例使用的是browser action和popup页面来做一个简单的应用。</p>
<h3 id="chrome应用基本架构">chrome应用基本架构</h3><p>绝大多数chrome应用会包含一个背景页面(background page)，用来执行chrome应用扩展的主要功能。该背景页面时再manifest.json中设置的：</p>
<pre><code class="javascript">&quot;background_page&quot;: &quot;bg.html&quot;,//默认背景页面
</code></pre>
<p><a href="/uploads/2011/10/background.gif"><img src="/uploads/2011/10/background.gif" alt="chrome通过background.html来实现主要功能" title="chrome通过background.html来实现主要功能"></a>[/caption]</p>
<p>上图显示了安装了应用扩展的chrome。黄色图标代表的browser action和蓝色图标代表的page action。在background.html文件里定义了browser action和javascript代码。在两个窗口里browser action都可以工作。</p>
<p>背景页面并不是chrome应用中唯一的页面。例如，本例天气预报插件中还包括了一个弹窗页面(popup.html)，此页面也是又html页面实现的。在应用内部还可以使用chrome.tabs.create()或者window.open()来显示内部的HTML文件。</p>
<p>chrome应用的弹窗界面也是可以在manifest.json中设置的：</p>
<pre><code class="javascript">&quot;browser_action&quot;: {
    &quot;default_icon&quot;: &quot;icon.png&quot; ,
    &quot;default_title&quot;: &quot;Weather&quot;,
    &quot;default_popup&quot;: &quot;popup.html&quot;
  },
</code></pre>
<blockquote>
<p>值得一提的是chrome应用里面的HTML页面可以互相访问各自DOM树中的全部元素，或者互相调用其中的函数。</p>
</blockquote>
<p>下图显示了一个chrome应用的弹窗的架构。弹窗的内容是由HTML文件（popup.html）定义的web页面。它不必复制背景页面(background.html)里的代码，因为它可以直接调用背景页面中的函数！</p>
<p><a href="/uploads/2011/10/popup.gif"><img src="/uploads/2011/10/popup.gif" alt="chrome应用的弹窗界面" title="chrome应用的弹窗界面"></a></p>
<h3 id="应用文件的引用">应用文件的引用</h3><p>任何需要的文件都可以放到应用（扩展）中，但是怎么使用它们呢？一般的说，可以像在普通的HTML文件中那样使用相对地址来引用一个文件。下面的例子演示了如何引用images子目录下的文件myimage.png</p>
<pre><code class="html">&lt;img src=&quot;img/myimage.png&quot; alt=&quot;&quot;&gt;
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chrome/">chrome</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/10/21/chrome扩展应用开发教程之开发chrome应用基础/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/前端开发/page/3/">&laquo; Prev</a><a class="page-number" href="/categories/前端开发/">1</a><a class="page-number" href="/categories/前端开发/page/2/">2</a><a class="page-number" href="/categories/前端开发/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/categories/前端开发/page/5/">5</a><a class="page-number" href="/categories/前端开发/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/categories/前端开发/page/13/">13</a><a class="extend next" rel="next" href="/categories/前端开发/page/5/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 三水清
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: true,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>


    <link rel="stylesheet" href="/css/share.min.css">
    <script src="/js/share.min.js"></script>








    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


<link rel="stylesheet" href="/css/github.css">
<script src="/js/highlight.js"></script>
<script type="text/javascript">
$(document).ready(function(){
   $('pre code').each(function(i, v){
        var $t = $(v);
        var lang = $t.attr('class');
        try{
            lang = lang==='shell'?'bash':lang;
            var data = hljs.highlight(lang, $t[0].textContent);
        }catch(e){
            var data = hljs.highlightAuto($t[0].textContent);
        }
        var lines = data.value.split('\n');
        var numbers = [];
        for (var i = 0, len = lines.length; i < len; i++){
            if(i===len-1&&$.trim(lines[i])===''){
                break;
            }
            numbers.push('<li>'+(i+1)+'</li>');
        }
        if(numbers.length){
            numbers = '<ul class="hljs-line-number">'+numbers.join('')+'</ul>'
        }
        $t.addClass('hljs')[0].innerHTML = numbers+data.value;
    })
});
</script>

  </div>
</body>
</html>